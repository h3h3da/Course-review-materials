# 数字证书与PKI
## 数字签名
### 数字签名的基本概念
·消息认证可以用于保护信息交换双方不受第三方的攻击，但是无法处理通信双方自身发生的攻击，而数字签名用于解决这类问题 

· 签名是证明当事者的身份及数据真实性

· 书面签名得到了司法部门的支持

· 完整数字签名应满足三个条件：
```
签名者事后不能够抵赖自己的签名
任何其他人不能够伪造签名
如果当时的双方关于签名的真伪发生争执，能够在公正的仲裁者面前通过验证确认其真伪
```
### 数字签名的模型
· 施加签名：算法为SIG,产生签名的密钥为K，被签名的数据为M，产生的签名信息为S
```
S = SIG(M,K)
```

· 验证签名：算法为VER，用于鉴别S的真假
```
VER(S,K) = TRUE ,when S=SIG(M,K)
         = FALSE,when S≠SIG(M,K)
```

· 签名S只能由签名者产生且签名者不可抵赖

· 收信者可以验证签名者、签名日期和时间

· 签名者应该有办法鉴别收信者所出示的是否是自己的签名。签名者有自卫的能力

· 签名应该能由第三方进行仲裁，解决争执

### MAC和数字签名的区别

MAC除了提供消息认证码还提供secret给验证方，所以验证方可以“冒充”发送方；

数字签名不提供secret给验证方，验证方不能“冒充”发送方。

### 公钥密码算法实现数字签名
· 对于一个公钥密码，满足：
```
E(D(M,Kd),Ke)=M  //发送方先使用私钥对M进行“解密”运算，再由接收方通过公钥进行“加密”运算进行验证

```

则可以保证数据的真实性

· 典型的数字签名算法：RSA、ElGamal、椭圆曲线密码等

### 盲签名、群签名和环签名

#### 群签名

1991 年由 Chaum 和 van Heyst 提出。群签名属于群体密码学的一个课题。

群签名有如下几个特点：只有群中成员能够代表群体签名（群特性）；接收者可以用公钥验证群签名（验证简单性）；接收者不能知道由群体中哪个成员所签（无条件匿名保护）；发生争议时，群体中的成员或可信赖机构可以识别签名者（可追查性）。

Desmedt 和 Frankel 在 1991 年提出了基于门限的群签名实现方案。在签名时，一个具有 n 个成员的群体共用同一个公钥，签名时必须有 t 个成员参与才能产生一个合法的签名，t 称为门限或阈值。这样一个签名称为(n, t)不可抵赖群签名。

#### 环签名

环签名由 Rivest,shamir 和 Tauman 三位密码学家在 2001 年首次提出。环签名属于一种简化的群签名。

签名者首先选定一个临时的签名者集合,集合中包括签名者自身。然后签名者利用自己的私钥和签名集合中其他人的公钥就可以独立的产生签名,而无需他人的帮助。签名者集合中的其他成员可能并不知道自己被包含在其中。

#### 盲签名

1983 年由 David Chaum 提出。签名者在无法看到原始内容的前提下对信息进行签名。

盲签名主要是为了实现防止追踪（unlinkability），签名者无法将签名内容和结果进行对应。典型的实现包括 RSA 盲签名)。

## 数字证书
### 数字证书的概念
· 数字证书是一个包含有 用户公钥、时间戳等附加信息以及认证方（可信的签证机构CA）签名的数字文件

· Certificate: { id || pk || sign(id || pk) || signer } 

· 证书附加信息：
```
版本号
序列号：一个整数用于在CA中唯一标志证书
发行商
主体唯一标志
签名算法标志
证书主体名
证书主体公钥信息
有效期
```

### CA (Certificate Authority)
· CA称为证书授权中心，是数字证书发放和管理的机构

### 证书链
· 证书被分为root certificates（根证书） 和 intermediates certificates，相应的CA也分成root CA 和intermediate CA

· CA的组织结构是一个树型结构，一个root CA下有多个intermediate CA，而他们都可以颁发证书给用户。

· 证书链的定义：证书链也成为认证链，它是最终实体为根证书的一系列证书组成的。 

· 可以通过证书的发行商向前追溯，也就是沿着证书链追溯到可信赖的CA的根（root）

### 根证书
· 根证书是CA认证中心自己给自己颁发的的证书，是证书信任链的七十点。安装根证书意味着对这个CA认证中心的信任

### PKI (Public Key Infrastructure)
· PKI公钥基础设施，是目前网络安全建设的基础与核心

· 在密码学中，PKI是指将公钥与相应的个体或是组织绑定起来的合约（arrangement）

· 其中绑定的方式是通过CA的证书注册以及颁发过程实现的

### HTTPS的证书
· DV型（域名型）：属于最初级的证书，仅需要验证域名的管理权限即可。一般都是通过向域名注册时留下的管理员邮箱发送验证邮件进行验证。

· OV型（企业型）：需要验证企业的真实性和域名的管理权限

· EV型（增强型）：需要验证域名管理权限以及企业真实性，还需要提供银行的开户许可证上的开户行名称

## 基于身份的密码（Identity-Based Cryptography）
### 定义
· 是一种非对称密码体系，与遗忘的公钥密码系统不同点在于可以使用任意的字符串作为用户的公钥，如个人的身份标识、电话号码等

· 不需要CA将用户身份与用户的公钥进行绑定

### 典型构造
· PKG 私钥生成：系统的PKG中心拥有一对主密钥master key，它公布主密钥的公钥，自己保留主密钥的私钥。

· public-key = F(private-key)

· private-key = F(master-key, public-key)

#### 流程
· 初始化
```
在PKG上输入一个安全参数t，生成系统参数params以及PKG的主密钥master-key
```

· 生成私钥
```
在PKG上输入系统参数params以及主密钥master-key以及用户ID（任意字符串），生成用户私钥Did
```

· 加密
```
输入系统参数params以及接收方的公钥ID（身份相关字符串），对明文M进行加密，获得密文C
```

· 解密
```
接收方使用系统参数params，以及自己的私钥Did对密文C解密，得到明文M
```


### 应用
· 无需密钥和证书管理就可以替代PKI的作用

· 

### 与传统公钥密码/PKI的区别
· 

· 